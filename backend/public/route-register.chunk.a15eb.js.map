{"version":3,"sources":["webpack:///route-register.chunk.a15eb.js","webpack:///./routes/register/index.js"],"names":["webpackJsonp","tVm/","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Register","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1_preact_router__","n","__WEBPACK_IMPORTED_MODULE_2__components_Helpers_Api__","_ref","class","type","name","placeholder","required","_ref2","minLength","_ref3","_ref4","_Component","props","_this","this","state","status","handleSubmit","bind","ev","Promise","$return","$error","form","preventDefault","FormData","target","get","setState","$Try_1_Post","$boundEx","$Try_1_Catch","err","resolve","register","then","componentDidMount","document","title","render","onSubmit"],"mappings":"AAAAA,cAAc,IAERC,OACA,SAAUC,EAAQC,EAAqBC,GAE7C,YAWA,SAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIC,WAAU,iEAAoED,GAAeD,GAASG,UAAYC,OAAOC,OAAOJ,GAAcA,EAAWE,WAAaG,aAAeC,MAAOP,EAAUQ,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeT,IAAYG,OAAOO,eAAiBP,OAAOO,eAAeX,EAAUC,GAAcD,EAASY,UAAYX,GAZjeG,OAAOS,eAAepB,EAAqB,cAAgBc,OAAO,IACnCb,EAAoBoB,EAAErB,EAAqB,UAAW,WAAa,MAAOsB,IACpF,IAAIC,GAAuCtB,EAAoB,QAE3DuB,GAD+CvB,EAAoBwB,EAAEF,GACvBtB,EAAoB,SAClEyB,EAAwDzB,EAAoB,QAcjG0B,ECcYhB,OAAAY,EAAA,YAAOK,MAAM,eAAeC,KAAK,OAAOC,KAAK,WAAWC,YAAY,WAAWC,SAAS,aDZpGC,ECaAtB,OAAAY,EAAA,YAAOK,MAAM,eAAeC,KAAK,WAAWC,KAAK,WAAWC,YAAY,WAAWC,SAAS,WAAWE,UAAU,MDXjHC,ECYAxB,OAAAY,EAAA,YAAOK,MAAM,eAAeC,KAAK,WAAWC,KAAK,YAAYC,YAAY,kBAAkBC,SAAS,WAAWE,UAAU,MDVzHE,ECWYzB,OAAAY,EAAA,YAAOK,MAAM,kBAAkBC,KAAK,SAASf,MAAM,aApC9CQ,ED2BN,SAAUe,GC1BxB,QAAAf,GAAYgB,GAAO,GAAAC,GAAArC,EAAAsC,KAClBH,EAAAjC,KAAAoC,KAAMF,GADY,OAElBC,GAAKE,MAAMC,OAAS,GACpBH,EAAKI,aAAeJ,EAAKI,aAAaC,KAAlBL,GAHFA,EDiGnB,MAtEAjC,GAAUgB,EAAUe,GAYpBf,EAASZ,UCjCHiC,aDiC4B,SCjCfE,GDkClB,MAAO,IAAIC,SAAQ,SAAUC,EAASC,GACrC,GCjCGC,EACJ,IAFAJ,EAAGK,iBACCD,EAAO,GAAIE,UAASN,EAAGO,QACvBH,EAAKI,IAAI,cAAgBJ,EAAKI,IAAI,aAErC,MADAb,MAAKc,UAAUZ,OAAQ,2BACvBK,GDsCA,IAAIQ,GAAc,WACjB,IACC,MAAOR,KACN,MAAOS,GACR,MAAOR,GAAOQ,KAEdZ,KAAKJ,MAAUiB,EAAe,SCtC1BC,GAAK,UACU,UAARA,EACAlB,KAAKc,UAAUZ,OAAQ,sBACV,YAARgB,GACLlB,KAAKc,UAAUZ,OAAQ,qCAJzBa,IAAA,MAAAC,GAAA,MAAAR,GAAAQ,KD6CTZ,KAAKJ,KCjDR,KACU,MAAAM,SAAAa,QAAMjC,EAAA,EAAIkC,SAASX,IAAnBY,KAAA,qBACTlD,QAAAa,EAAA,GAAM,UADG+B,IAAA,MAAAC,GAAA,MAAAC,GAAAD,KAAAZ,KAAAJ,MAAAiB,GAGV,MAAOC,GAAKD,EAALC,KDyDLd,KAAKJ,QAGRlB,EAASZ,UCpDToD,kBDoDuC,WCnDhCC,SAASC,MAAQ,qBDuDxB1C,EAASZ,UCpDTuD,ODoD4B,WCnD3B,MACCtD,QAAAY,EAAA,WAAM2C,SAAU1B,KAAKG,aAAcf,MAAM,cAAzCD,EAAAM,EAAAE,EAAAC,EAKCzB,OAAAY,EAAA,YAAIiB,KAAKC,MAAMC,UD6DXpB,GClG8BC,EAAA","file":"route-register.chunk.a15eb.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"tVm/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Register; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact_router__ = __webpack_require__(\"/QC5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Helpers_Api__ = __webpack_require__(\"f/XO\");\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar _ref = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { 'class': 'u-full-width', type: 'text', name: 'username', placeholder: 'Username', required: 'required' });\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { 'class': 'u-full-width', type: 'password', name: 'password', placeholder: 'Password', required: 'required', minLength: '6' });\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { 'class': 'u-full-width', type: 'password', name: 'password2', placeholder: 'Repeat password', required: 'required', minLength: '6' });\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { 'class': 'btn right-align', type: 'submit', value: 'Register' });\n\nvar Register = function (_Component) {\n\t_inherits(Register, _Component);\n\n\tfunction Register(props) {\n\t\t_classCallCheck(this, Register);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_this.state.status = '';\n\t\t_this.handleSubmit = _this.handleSubmit.bind(_this);\n\t\treturn _this;\n\t}\n\n\tRegister.prototype.handleSubmit = function handleSubmit(ev) {\n\t\treturn new Promise(function ($return, $error) {\n\t\t\tvar form;\n\n\t\t\tev.preventDefault();\n\t\t\tform = new FormData(ev.target);\n\t\t\tif (form.get('password') !== form.get('password2')) {\n\t\t\t\tthis.setState({ status: 'Passwords do not match' });\n\t\t\t\treturn $return();\n\t\t\t}\n\t\t\tvar $Try_1_Post = function () {\n\t\t\t\ttry {\n\t\t\t\t\treturn $return();\n\t\t\t\t} catch ($boundEx) {\n\t\t\t\t\treturn $error($boundEx);\n\t\t\t\t}\n\t\t\t}.bind(this);var $Try_1_Catch = function (err) {\n\t\t\t\ttry {\n\t\t\t\t\tif (err === 'taken') this.setState({ status: 'Username is taken' });else if (err === 'invalid') this.setState({ status: 'Invalid username and/or password' });\n\t\t\t\t\treturn $Try_1_Post();\n\t\t\t\t} catch ($boundEx) {\n\t\t\t\t\treturn $error($boundEx);\n\t\t\t\t}\n\t\t\t}.bind(this);try {\n\t\t\t\treturn Promise.resolve(__WEBPACK_IMPORTED_MODULE_2__components_Helpers_Api__[\"a\" /* default */].register(form)).then(function ($await_2) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_1_preact_router__[\"b\" /* route */])('/login');\n\t\t\t\t\t\treturn $Try_1_Post();\n\t\t\t\t\t} catch ($boundEx) {\n\t\t\t\t\t\treturn $Try_1_Catch($boundEx);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), $Try_1_Catch);\n\t\t\t} catch (err) {\n\t\t\t\t$Try_1_Catch(err)\n\t\t\t}\n\t\t}.bind(this));\n\t};\n\n\tRegister.prototype.componentDidMount = function componentDidMount() {\n\t\tdocument.title = \"Register - MyPass\";\n\t};\n\n\tRegister.prototype.render = function render() {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t'form',\n\t\t\t{ onSubmit: this.handleSubmit, 'class': 'login-form' },\n\t\t\t_ref,\n\t\t\t_ref2,\n\t\t\t_ref3,\n\t\t\t_ref4,\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'p',\n\t\t\t\tnull,\n\t\t\t\tthis.state.status\n\t\t\t)\n\t\t);\n\t};\n\n\treturn Register;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-register.chunk.a15eb.js","import { h, Component } from 'preact';\r\nimport { route } from 'preact-router';\r\n\r\nimport Api from '../../components/Helpers/Api';\r\n\r\n\r\nexport default class Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state.status = '';\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t}\r\n\r\n\tasync handleSubmit(ev) {\r\n\t\tev.preventDefault();\r\n\t\tlet form = new FormData(ev.target);\r\n\t\tif (form.get('password') !== form.get('password2')){\r\n\t\t\tthis.setState({status: 'Passwords do not match'});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n            await Api.register(form);\r\n\t\t\troute('/login');\r\n\t\t}\r\n\t\tcatch (err) {\r\n            if (err === 'taken')\r\n                this.setState({status: 'Username is taken'});\r\n            else if (err === 'invalid')\r\n                this.setState({status: 'Invalid username and/or password'});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        document.title = \"Register - MyPass\";\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<form onSubmit={this.handleSubmit} class=\"login-form\">\r\n                <input class=\"u-full-width\" type=\"text\" name=\"username\" placeholder=\"Username\" required=\"required\"/>\r\n\t\t\t\t<input class=\"u-full-width\" type=\"password\" name=\"password\" placeholder=\"Password\" required=\"required\" minLength=\"6\"/>\r\n\t\t\t\t<input class=\"u-full-width\" type=\"password\" name=\"password2\" placeholder=\"Repeat password\" required=\"required\" minLength=\"6\"/>\r\n                <input class=\"btn right-align\" type=\"submit\" value=\"Register\" />\r\n\t\t\t\t<p>{this.state.status}</p>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./routes/register/index.js"],"sourceRoot":""}